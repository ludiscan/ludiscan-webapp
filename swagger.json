{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/robots.txt": {
      "get": {
        "operationId": "AppController_getRobots",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/ping": {
      "get": {
        "operationId": "AppController_getPing",
        "parameters": [],
        "responses": {
          "200": {
            "description": "pong",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/health": {
      "get": {
        "operationId": "HealthController_check",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "総合ヘルスチェック",
        "tags": [
          "Health"
        ]
      }
    },
    "/health/liveness": {
      "get": {
        "operationId": "HealthController_liveness",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Liveness Probe（生存確認）",
        "tags": [
          "Health"
        ]
      }
    },
    "/health/readiness": {
      "get": {
        "operationId": "HealthController_readiness",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Readiness Probe（準備完了確認）",
        "tags": [
          "Health"
        ]
      }
    },
    "/admin/blocked-ips": {
      "get": {
        "operationId": "BlockedIpsController_getBlockedIps",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of blocked IPs"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Admin role required"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get list of blocked IPs",
        "tags": [
          "Admin - Blocked IPs"
        ]
      },
      "delete": {
        "operationId": "BlockedIpsController_unblockAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "All IPs unblocked successfully"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Admin role required"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Unblock all blocked IPs",
        "tags": [
          "Admin - Blocked IPs"
        ]
      }
    },
    "/admin/blocked-ips/{ip}": {
      "delete": {
        "operationId": "BlockedIpsController_unblockIp",
        "parameters": [
          {
            "name": "ip",
            "required": true,
            "in": "path",
            "description": "IP address to unblock",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "IP unblocked successfully"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Admin role required"
          },
          "404": {
            "description": "IP not found in blocked list"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Unblock a specific IP address",
        "tags": [
          "Admin - Blocked IPs"
        ]
      }
    },
    "/api/v0/users": {
      "get": {
        "operationId": "UsersController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "すべてのユーザーを取得",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "UsersController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ユーザーを作成",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/users/search": {
      "get": {
        "operationId": "UsersController_search",
        "parameters": [
          {
            "name": "q",
            "required": true,
            "in": "query",
            "description": "検索クエリ（メールアドレスまたは名前）",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ユーザーを検索",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/users/{id}": {
      "get": {
        "operationId": "UsersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "特定のユーザーを取得",
        "tags": [
          "v0"
        ]
      },
      "delete": {
        "operationId": "UsersController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ユーザーID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "ユーザーが見つかりません"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ユーザーを削除",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/users/{id}/role": {
      "patch": {
        "operationId": "UsersController_updateRole",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ユーザーID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "ユーザーが見つかりません"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ユーザーのロールを更新",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/auth/google": {
      "get": {
        "operationId": "AuthController_googleStart",
        "parameters": [
          {
            "name": "state",
            "required": false,
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/GoogleStartQueryDto"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to Google consent screen"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "summary": "Google OAuth開始（サインアップ/ログイン）",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/auth/google/link": {
      "get": {
        "description": "ログイン済みユーザーのIDを `state` に封入し、/auth/google に302。最終的にコールバックでリンクします。",
        "operationId": "AuthController_googleLink",
        "parameters": [
          {
            "name": "returnTo",
            "required": false,
            "in": "query",
            "description": "リンク完了後に戻る先（フロントのURL）",
            "schema": {
              "$ref": "#/components/schemas/GoogleLinkQueryDto"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to /api/v0/auth/google with signed state"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "現在のユーザーにGoogleアカウントをリンク",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/auth/google/auth": {
      "get": {
        "description": "認証完了後に指定したURLへリダイレクトします。主にadminページなど特定のページからの認証に使用。",
        "operationId": "AuthController_googleAuthWithReturn",
        "parameters": [
          {
            "name": "returnTo",
            "required": false,
            "in": "query",
            "description": "認証完了後に戻る先（フロントのURL）",
            "schema": {
              "$ref": "#/components/schemas/GoogleAuthWithReturnQueryDto"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to /api/v0/auth/google with signed state"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "summary": "Google OAuth開始（カスタムreturnTo付き）",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/auth/google/callback": {
      "get": {
        "description": "Passportが `req.user` にGoogleプロフィールをセット。`state` がリンクモードならリンク、そうでなければログイン/サインアップ。最後にフロントへ302（?token=... か ?code=...）。",
        "operationId": "AuthController_googleCallback",
        "parameters": [
          {
            "name": "state",
            "required": false,
            "in": "query",
            "description": "署名付きstate（自前検証用）",
            "schema": {
              "$ref": "#/components/schemas/GoogleCallbackQueryDto"
            }
          },
          {
            "name": "error",
            "required": false,
            "in": "query",
            "description": "Google側エラー（存在する場合）",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "code",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "scope",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "authuser",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "prompt",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "hd",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect back to front-end with token or error code"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "summary": "Google OAuth コールバック",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/auth/identity/google": {
      "delete": {
        "description": "唯一のログイン手段になる場合は拒否するなどのポリシーをAuthService側で実装してください。",
        "operationId": "AuthController_unlinkGoogle",
        "parameters": [],
        "responses": {
          "204": {
            "description": "Unlinked"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "現在のユーザーからGoogleをアンリンク",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/auth/health": {
      "get": {
        "operationId": "AuthController_health",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v0/login": {
      "post": {
        "operationId": "LoginController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          }
        },
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/login/profile": {
      "get": {
        "operationId": "LoginController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects": {
      "get": {
        "operationId": "ProjectsController_findAll",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get all projects",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "ProjectsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProjectDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create a project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}": {
      "get": {
        "operationId": "ProjectsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get project by ID",
        "tags": [
          "v0"
        ]
      },
      "delete": {
        "operationId": "ProjectsController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete a project",
        "tags": [
          "v0"
        ]
      },
      "put": {
        "operationId": "ProjectsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProjectDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update a project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/meta_fields": {
      "get": {
        "operationId": "ProjectsController_getMetaDataKeys",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CalcFieldResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List meta data keys",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/meta_fields/{key}": {
      "get": {
        "operationId": "ProjectsController_getMetaData",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "key",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetMetaDataDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get meta data",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/general_log/{event_type}": {
      "get": {
        "operationId": "ProjectsController_getGeneralLog",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StringGeneralLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get general log in project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/general_log/keys": {
      "get": {
        "operationId": "ProjectsController_getGeneralLogKeys",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get general log keys in project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/general_log/position/{event_type}": {
      "get": {
        "operationId": "ProjectsController_getPositionGeneralLog",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PositionGeneralLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get position general log in project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{id}/general_log/position/keys": {
      "get": {
        "operationId": "ProjectsController_getPositionGeneralLogKeys",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get position general log keys in project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0.1/projects": {
      "get": {
        "operationId": "ProjectsV01Controller_myProjects",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of logs to return (default: 20)",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "default": 0,
              "example": 0,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectResponseV01Dto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "自分がアクセス可能なプロジェクト一覧（owner or member）",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/members": {
      "get": {
        "operationId": "ProjectsV01Controller_listMembers",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of logs to return (default: 20)",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "default": 0,
              "example": 0,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectMemberDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "プロジェクトのメンバー一覧",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/members/email": {
      "post": {
        "operationId": "ProjectsV01Controller_addByEmail",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddMemberByEmailDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemberDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "メンバー追加（メール指定・既存ユーザーのみ）",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/members/{user_id}": {
      "delete": {
        "operationId": "ProjectsV01Controller_remove",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "user_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "メンバー削除（管理権限のみ）",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/maps": {
      "get": {
        "operationId": "ProjectsV01Controller_getProjectMaps",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "activeOnly",
            "required": false,
            "in": "query",
            "description": "trueの場合、マップデータがアップロード済みのマップのみを返す",
            "schema": {
              "default": false,
              "example": false,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetMapsDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "プロジェクトのマップ一覧",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0/general_log/keys": {
      "get": {
        "operationId": "GeneralLogController_getKeys",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "session_id",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/general_log/position/keys": {
      "get": {
        "operationId": "GeneralLogController_getPositionKeys",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "session_id",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/general_log/{event_type}/{id}": {
      "get": {
        "operationId": "GeneralLogController_getLogDetail",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringGeneralLogDetailDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/general_log/position/{event_type}/{id}": {
      "get": {
        "operationId": "GeneralLogController_getPositionLogDetail",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PositionGeneralLogDetailDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session": {
      "get": {
        "operationId": "PlaySessionController_findAll",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "isFinished",
            "required": false,
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "enum": [
                "id",
                "name",
                "start_time",
                "end_time",
                "updated_at"
              ],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order (asc or desc)",
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlaySessionResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get all play sessions",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "PlaySessionController_create",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlaySessionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create a play session",
        "tags": [
          "v0"
        ]
      },
      "delete": {
        "operationId": "PlaySessionController_deleteAll",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete all play sessions",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}": {
      "get": {
        "operationId": "PlaySessionController_findOne",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get a play session",
        "tags": [
          "v0"
        ]
      },
      "put": {
        "operationId": "PlaySessionController_update",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlaySessionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update a play session",
        "tags": [
          "v0"
        ]
      },
      "delete": {
        "operationId": "PlaySessionController_delete",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete a play session",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/finish": {
      "post": {
        "operationId": "PlaySessionController_finish",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Finish a play session",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/calc_number_field": {
      "post": {
        "operationId": "PlaySessionController_calcNumberField",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CalcFieldRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CalcNumberFieldDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Calculate number field",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/general_log/{event_type}": {
      "get": {
        "operationId": "PlaySessionController_getGeneralLog",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StringGeneralLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get session general log",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "deprecated": true,
        "description": "DEPRECATED: Use batch upload endpoint instead (POST /projects/:project_id/sessions/:session_id/general-events/upload). This endpoint is for real-time logging and will be removed in a future version.",
        "operationId": "PlaySessionController_createGeneralLog",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGeneralLogDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StringGeneralLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "create general log",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/general_log/keys": {
      "get": {
        "operationId": "PlaySessionController_getGeneralLogKeys",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get general log keys",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/general_log/position/{event_type}": {
      "get": {
        "operationId": "PlaySessionController_getPositionLog",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PositionGeneralLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get general log",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "deprecated": true,
        "description": "DEPRECATED: Use batch upload endpoint instead (POST /projects/:project_id/sessions/:session_id/general-events/upload). This endpoint is for real-time logging and will be removed in a future version.",
        "operationId": "PlaySessionController_createPositionLog",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGeneralLogDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PositionGeneralLogDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "create position log",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/general_log/position/keys": {
      "get": {
        "operationId": "PlaySessionController_getPositionLogKeys",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetGeneralLogKeysDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get general log keys",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/search": {
      "get": {
        "description": "\nSearch play sessions with flexible query parameters.\n\n**Search Methods:**\n1. Individual parameters (name, platform, device_id, etc.)\n2. Unified search using 'q' parameter (plain text keyword OR GitHub-style filters)\n3. Both combined (parameters are merged with AND logic)\n\n**'q' Parameter Examples:**\n\n*Plain text keyword search (searches across name, device_id, platform, app_version, metadata keys and values):*\n- `q=Session_2025` - Find sessions with \"Session_2025\" in any searchable field\n- `q=Android` - Find sessions with \"Android\" in any searchable field\n- `q=MapA` - Find sessions with \"MapA\" in metadata (key or value)\n- `q=score` - Find sessions with \"score\" metadata key or value\n\n*GitHub-style filters:*\n- `q=platform:Android is:playing` - Android sessions currently playing\n- `q=name:Session is:finished` - Finished sessions with \"Session\" in name\n- `q=metadata.mapName:Level1 platform:iOS` - iOS sessions with mapName=Level1\n- `q=start_time:>2025-01-01 is:finished` - Finished sessions after 2025-01-01\n\n*Mixed (keyword + filters):*\n- `q=Session_2025 platform:Android` - Sessions with \"Session_2025\" in name/device/platform/version AND on Android\n- `q=Level1 is:finished` - Finished sessions with \"Level1\" in any searchable field\n\n**Metadata Search (using individual parameters):**\n- `metadata_key=mapName` - Sessions that have mapName key (any value)\n- `metadata_key=mapName&metadata_value=Level1` - Sessions with mapName=Level1\n        ",
        "operationId": "PlaySessionV01Controller_search",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "name",
            "required": false,
            "in": "query",
            "description": "Session name (partial match)",
            "schema": {
              "example": "Session_2025",
              "type": "string"
            }
          },
          {
            "name": "device_id",
            "required": false,
            "in": "query",
            "description": "Device ID (exact match)",
            "schema": {
              "example": "device-123",
              "type": "string"
            }
          },
          {
            "name": "platform",
            "required": false,
            "in": "query",
            "description": "Platform (exact match)",
            "schema": {
              "example": "Android",
              "type": "string"
            }
          },
          {
            "name": "app_version",
            "required": false,
            "in": "query",
            "description": "App version (exact match)",
            "schema": {
              "example": "1.0.0",
              "type": "string"
            }
          },
          {
            "name": "start_time_from",
            "required": false,
            "in": "query",
            "description": "Start time from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "start_time_to",
            "required": false,
            "in": "query",
            "description": "Start time to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "end_time_from",
            "required": false,
            "in": "query",
            "description": "End time from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "end_time_to",
            "required": false,
            "in": "query",
            "description": "End time to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "updated_at_from",
            "required": false,
            "in": "query",
            "description": "Updated at from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "updated_at_to",
            "required": false,
            "in": "query",
            "description": "Updated at to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "is_playing",
            "required": false,
            "in": "query",
            "description": "Filter by playing status (true: currently playing, false: finished)",
            "schema": {
              "example": false,
              "type": "boolean"
            }
          },
          {
            "name": "metadata_key",
            "required": false,
            "in": "query",
            "description": "Metadata key to search for (can be used alone to check key existence)",
            "schema": {
              "example": "mapName",
              "type": "string"
            }
          },
          {
            "name": "metadata_value",
            "required": false,
            "in": "query",
            "description": "Metadata value to search for (requires metadata_key to be specified)",
            "schema": {
              "example": "Level1",
              "type": "string"
            }
          },
          {
            "name": "q",
            "required": false,
            "in": "query",
            "description": "Unified search query. Supports: (1) Plain text keyword search across name, device_id, platform, app_version, and metadata keys/values (e.g., \"Session_2025\" or \"MapA\"), (2) GitHub-style filters (e.g., \"platform:Android is:playing\"), (3) Mixed (e.g., \"Session_2025 platform:Android is:finished\"). Keywords and filters are combined with AND logic.",
            "schema": {
              "example": "Session_2025 platform:Android is:finished",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of results to return",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of results to skip",
            "schema": {
              "minimum": 0,
              "default": 0,
              "type": "number"
            }
          },
          {
            "name": "sort_by",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "default": "start_time",
              "type": "string",
              "enum": [
                "id",
                "name",
                "start_time",
                "end_time",
                "updated_at"
              ]
            }
          },
          {
            "name": "sort_order",
            "required": false,
            "in": "query",
            "description": "Sort order",
            "schema": {
              "default": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchPlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Search play sessions",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/search/summary": {
      "get": {
        "description": "\nGet lightweight summary of all matching sessions (no pagination).\nThis endpoint is useful for previewing which sessions will be included in a heatmap task before creating it.\n\nAccepts the same search parameters as the regular search endpoint, but returns only session IDs and display text.\n\n**Display Format:** \"SessionName (Platform, Version) - YYYY-MM-DD HH:mm\"\n\n**Use Case:**\n1. Call this endpoint to preview filtered sessions\n2. User confirms the session list\n3. Use the same search query in heatmap task creation API\n        ",
        "operationId": "PlaySessionV01Controller_searchSummary",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "name",
            "required": false,
            "in": "query",
            "description": "Session name (partial match)",
            "schema": {
              "example": "Session_2025",
              "type": "string"
            }
          },
          {
            "name": "device_id",
            "required": false,
            "in": "query",
            "description": "Device ID (exact match)",
            "schema": {
              "example": "device-123",
              "type": "string"
            }
          },
          {
            "name": "platform",
            "required": false,
            "in": "query",
            "description": "Platform (exact match)",
            "schema": {
              "example": "Android",
              "type": "string"
            }
          },
          {
            "name": "app_version",
            "required": false,
            "in": "query",
            "description": "App version (exact match)",
            "schema": {
              "example": "1.0.0",
              "type": "string"
            }
          },
          {
            "name": "start_time_from",
            "required": false,
            "in": "query",
            "description": "Start time from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "start_time_to",
            "required": false,
            "in": "query",
            "description": "Start time to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "end_time_from",
            "required": false,
            "in": "query",
            "description": "End time from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "end_time_to",
            "required": false,
            "in": "query",
            "description": "End time to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "updated_at_from",
            "required": false,
            "in": "query",
            "description": "Updated at from (ISO 8601)",
            "schema": {
              "example": "2025-01-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "name": "updated_at_to",
            "required": false,
            "in": "query",
            "description": "Updated at to (ISO 8601)",
            "schema": {
              "example": "2025-01-31T23:59:59Z",
              "type": "string"
            }
          },
          {
            "name": "is_playing",
            "required": false,
            "in": "query",
            "description": "Filter by playing status (true: currently playing, false: finished)",
            "schema": {
              "example": false,
              "type": "boolean"
            }
          },
          {
            "name": "metadata_key",
            "required": false,
            "in": "query",
            "description": "Metadata key to search for (can be used alone to check key existence)",
            "schema": {
              "example": "mapName",
              "type": "string"
            }
          },
          {
            "name": "metadata_value",
            "required": false,
            "in": "query",
            "description": "Metadata value to search for (requires metadata_key to be specified)",
            "schema": {
              "example": "Level1",
              "type": "string"
            }
          },
          {
            "name": "q",
            "required": false,
            "in": "query",
            "description": "Unified search query. Supports: (1) Plain text keyword search across name, device_id, platform, app_version, and metadata keys/values (e.g., \"Session_2025\" or \"MapA\"), (2) GitHub-style filters (e.g., \"platform:Android is:playing\"), (3) Mixed (e.g., \"Session_2025 platform:Android is:finished\"). Keywords and filters are combined with AND logic.",
            "schema": {
              "example": "Session_2025 platform:Android is:finished",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of results to return",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of results to skip",
            "schema": {
              "minimum": 0,
              "default": 0,
              "type": "number"
            }
          },
          {
            "name": "sort_by",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "default": "start_time",
              "type": "string",
              "enum": [
                "id",
                "name",
                "start_time",
                "end_time",
                "updated_at"
              ]
            }
          },
          {
            "name": "sort_order",
            "required": false,
            "in": "query",
            "description": "Sort order",
            "schema": {
              "default": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchSessionSummaryResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Search play sessions summary",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/{session_id}/maps": {
      "get": {
        "operationId": "PlaySessionV01Controller_getSessionMaps",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "default": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "セッションのマップ一覧",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/aggregate": {
      "post": {
        "description": "\nAggregate play sessions with flexible filter criteria and return statistics.\n\n**Features:**\n- Count sessions matching filter criteria (total, finished, playing)\n- Aggregate numeric metadata fields (sum, avg, min, max)\n- Combine multiple aggregations in a single request\n\n**Filter Criteria:**\nSame as search endpoint - supports individual parameters, 'q' unified query, or both.\n\n**Aggregation Example:**\n```json\n{\n  \"platform\": \"Android\",\n  \"is_playing\": false,\n  \"aggregations\": [\n    { \"field\": \"score\", \"operations\": [\"sum\", \"avg\", \"min\", \"max\"] },\n    { \"field\": \"playTime\", \"operations\": [\"sum\", \"avg\"] }\n  ]\n}\n```\n\n**Response Example:**\n```json\n{\n  \"totalCount\": 250,\n  \"finishedCount\": 200,\n  \"playingCount\": 50,\n  \"aggregations\": [\n    { \"field\": \"score\", \"count\": 180, \"sum\": 12500, \"avg\": 69.44, \"min\": 10, \"max\": 200 },\n    { \"field\": \"playTime\", \"count\": 195, \"sum\": 58500, \"avg\": 300 }\n  ]\n}\n```\n        ",
        "operationId": "PlaySessionV01Controller_aggregate",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AggregatePlaySessionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Aggregation results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AggregatePlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Aggregate play sessions",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/filter-options": {
      "get": {
        "description": "\nGet distinct values for filter dropdowns.\n\nReturns lists of unique values for:\n- Platforms (e.g., Android, iOS, Windows)\n- App versions (e.g., 1.0.0, 1.1.0, 2.0.0)\n- Device IDs\n\nUse these values to populate filter dropdowns in the UI.\n        ",
        "operationId": "PlaySessionV01Controller_getFilterOptions",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Filter options",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FilterOptionsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get filter options",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/metadata-keys": {
      "get": {
        "description": "\nGet all metadata keys used across sessions in a project.\n\nReturns for each key:\n- Key name\n- Count of sessions that have this key\n- Whether the values are numeric (can be aggregated)\n- Sample values (up to 5)\n\nUse this to:\n- Build dynamic metadata filter UI\n- Know which fields can be used for aggregation\n- Preview what data is available in metadata\n        ",
        "operationId": "PlaySessionV01Controller_getMetadataKeys",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Metadata keys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MetadataKeysResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get metadata keys",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/player_position_log": {
      "get": {
        "operationId": "PlayerPositionLogController_get",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of logs to return (default: 20)",
            "schema": {
              "default": 200,
              "example": 200,
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "default": 0,
              "example": 0,
              "type": "integer"
            }
          },
          {
            "name": "player",
            "required": false,
            "in": "query",
            "description": "Filter by player ID (optional)",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlayPositionLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get player position logs",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "PlayerPositionLogController_post",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Binary data containing meta information and player positions",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Upload binary player data",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/player_position_log/{session_id}/players": {
      "get": {
        "operationId": "PlayerPositionLogController_getPlayers",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get player IDs from session",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/play_session/{session_id}/player_position_log": {
      "post": {
        "operationId": "PlayerPositionLogV01Controller_post",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Binary data containing meta information and player positions",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Upload binary player data",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/field_object_log": {
      "get": {
        "operationId": "FieldObjectLogController_get",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "start_time",
            "required": false,
            "in": "query",
            "description": "Filter by start offset_timestamp (optional)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "end_time",
            "required": false,
            "in": "query",
            "description": "Filter by end offset_timestamp (optional)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "object_types",
            "required": false,
            "in": "query",
            "description": "Comma-separated object types to filter (optional)",
            "schema": {
              "example": "health_potion,zombie",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FieldObjectLogDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get field object logs",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "FieldObjectLogController_post",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Binary data containing field object events",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Upload binary field object logs",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/projects/{project_id}/play_session/{session_id}/field_object_log/object_types": {
      "get": {
        "operationId": "FieldObjectLogController_getObjectTypes",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get distinct object types from session",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/projects/{project_id}/play_session/{session_id}/tasks": {
      "post": {
        "operationId": "HeatmapController_createSessionTask",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateHeatmapDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create heatmap calculation task",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/projects/{project_id}/tasks/list": {
      "get": {
        "description": "\nGet a list of completed heatmap tasks for a project with pagination.\nReturns tasks ordered by most recent first (by updated_at).\nDoes not include heavy result data for better performance.\n        ",
        "operationId": "HeatmapController_getProjectTasksList",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskListDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap tasks list for project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/projects/{project_id}/tasks": {
      "post": {
        "description": "\nCreate a heatmap task for a project with optional session filtering.\n\n**Filtering Options:**\n1. No filter: Use all sessions in the project\n2. sessionIds: Specify exact session IDs (array of numbers)\n3. searchQuery: Use search parameters to filter sessions (same as session search API)\n\n**Note:** sessionIds and searchQuery cannot be used together.\n\n**Example with searchQuery:**\n```json\n{\n  \"stepSize\": 300,\n  \"searchQuery\": {\n    \"q\": \"platform:Android is:finished\"\n  }\n}\n```\n        ",
        "operationId": "HeatmapController_createProjectTask",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateHeatmapDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create heatmap calculation task for project",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/tasks/{task_id}": {
      "get": {
        "operationId": "HeatmapController_getTask",
        "parameters": [
          {
            "name": "task_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap calculation task",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/tasks/{task_id}/maps": {
      "get": {
        "operationId": "HeatmapController_getTaskMapNames",
        "parameters": [
          {
            "name": "task_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Map names",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetMapsDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap map names",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/map_data/{map_name}": {
      "get": {
        "operationId": "HeatmapController_getMapData",
        "parameters": [
          {
            "name": "map_name",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Map data",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            },
            "headers": {
              "X-Model-File-Type": {
                "description": "The file type of the 3D model (obj, fbx, gltf, glb)",
                "schema": {
                  "type": "string",
                  "enum": [
                    "obj",
                    "fbx",
                    "gltf",
                    "glb"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap map data",
        "tags": [
          "v0"
        ]
      },
      "post": {
        "operationId": "HeatmapController_postMapData",
        "parameters": [
          {
            "name": "map_name",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Map data uploaded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ファイルアップロードエンドポイント",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/heatmap/projects/{project_id}/play_session/{session_id}/embed-url": {
      "post": {
        "description": "セッション完了後にWebViewで直接ヒートマップを表示するための短縮URLを生成します。有効期限は0.5〜8760時間（30分〜365日）の範囲で指定可能（デフォルト: 4時間）。通常のJWT tokenで実行可能です。",
        "operationId": "HeatmapController_createSessionEmbedUrl",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateEmbedUrlDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapEmbedUrlResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ヒートマップ埋め込みページのURLを取得（JWT認証）",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0.1/heatmap/projects/{project_id}/play_session/{session_id}/tasks": {
      "post": {
        "description": "\nCreates a heatmap calculation task for a specific session.\nReturns normalized density values (0-1 range) instead of raw counts.\n\n**v0.1 Improvements:**\n- Density values are pre-normalized to 0-1 range on the server\n- Includes normalization statistics for debugging\n- Frontend only needs minThreshold slider for filtering\n        ",
        "operationId": "HeatmapV01Controller_createSessionTask",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateHeatmapDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created with normalized density",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskV01Dto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create heatmap task for session (v0.1 - normalized density)",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/heatmap/projects/{project_id}/tasks": {
      "post": {
        "description": "\nCreates a heatmap calculation task for a project with optional session filtering.\nReturns normalized density values (0-1 range) instead of raw counts.\n\n**Filtering Options:**\n1. No filter: Use all sessions in the project\n2. sessionIds: Specify exact session IDs (array of numbers)\n3. searchQuery: Use search parameters to filter sessions\n\n**v0.1 Improvements:**\n- Density values are pre-normalized to 0-1 range on the server\n- Includes normalization statistics for debugging\n- Frontend only needs minThreshold slider for filtering\n        ",
        "operationId": "HeatmapV01Controller_createProjectTask",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateHeatmapDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created with normalized density",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskV01Dto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create heatmap task for project (v0.1 - normalized density)",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/heatmap/tasks/{task_id}": {
      "get": {
        "description": "\nGet heatmap task details with normalized density values (0-1 range).\n\n**Response includes:**\n- result: Array of points with normalizedDensity (0-1 range)\n- stats: Normalization statistics (min, max, percentiles, scale mode)\n        ",
        "operationId": "HeatmapV01Controller_getTask",
        "parameters": [
          {
            "name": "task_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task details with normalized density",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskV01Dto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap task with normalized density (v0.1)",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0.1/heatmap/projects/{project_id}/tasks/list": {
      "get": {
        "description": "\nGet a list of completed heatmap tasks for a project with pagination.\nReturns tasks ordered by most recent first (by updated_at).\nDoes not include result data for better performance.\n        ",
        "operationId": "HeatmapV01Controller_getProjectTasksList",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of tasks to return (1-100, default: 20)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapTaskV01ListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get heatmap tasks list for project (v0.1)",
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0/h/{code}": {
      "get": {
        "description": "短縮コードを検証し、有効であればwebappのheatmapページにリダイレクトします",
        "operationId": "ShareLinksController_redirect",
        "parameters": [
          {
            "name": "code",
            "required": true,
            "in": "path",
            "description": "共有リンクコード（4文字-4文字）",
            "schema": {
              "example": "ABCD-EFGH",
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "heatmapページにリダイレクト"
          },
          "400": {
            "description": "リンクが無効化されている、期限切れ、または使用回数超過"
          },
          "404": {
            "description": "リンクが見つからない"
          }
        },
        "summary": "共有リンクからheatmapページにリダイレクト",
        "tags": [
          "Share Links"
        ]
      }
    },
    "/api/v0/database/backup": {
      "post": {
        "operationId": "BackupController_backup",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0.1/projects/{project_id}/sessions/{session_id}/summary": {
      "post": {
        "operationId": "SummariesController_create",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Language",
            "schema": {
              "enum": [
                "ja",
                "en"
              ],
              "type": "string"
            }
          },
          {
            "name": "step_size",
            "required": false,
            "in": "query",
            "description": "Step size",
            "schema": {
              "minimum": 1,
              "default": 50,
              "type": "number"
            }
          },
          {
            "name": "z_visible",
            "required": true,
            "in": "query",
            "description": "Z-axis visibility",
            "schema": {
              "default": true,
              "type": "boolean"
            }
          },
          {
            "name": "provider",
            "required": false,
            "in": "query",
            "description": "Summarization provider",
            "schema": {
              "enum": [
                "template",
                "openai",
                "ollama"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSummaryDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0.1"
        ]
      },
      "get": {
        "operationId": "SummariesController_latest",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSummaryDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Summary not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "v0.1"
        ]
      }
    },
    "/api/v0/game-api-keys": {
      "post": {
        "description": "ゲームクライアントから使用するAPIキーを新規作成します。作成されたAPIキーは一度だけ表示され、二度と表示されないため必ず保存してください。",
        "operationId": "GameApiKeysController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGameApiKeyDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created - APIキーが正常に作成されました",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateGameApiKeyResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "ゲームクライアント用のAPIキーを作成",
        "tags": [
          "v0"
        ]
      },
      "get": {
        "description": "ユーザーが作成した全てのAPIキーの一覧を取得します。",
        "operationId": "GameApiKeysController_findAll",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of API keys to return (default: 20, max: 100)",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "default": 0,
              "example": 0,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GameApiKeyResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "APIキー一覧を取得",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/game-api-keys/{id}": {
      "get": {
        "description": "指定されたAPIキーIDの詳細情報を取得します。",
        "operationId": "GameApiKeysController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "API Key ID",
            "schema": {
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GameApiKeyResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "APIキーの詳細を取得",
        "tags": [
          "v0"
        ]
      },
      "delete": {
        "description": "指定されたAPIキーを削除します。削除されたAPIキーは使用できなくなります。",
        "operationId": "GameApiKeysController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "API Key ID",
            "schema": {
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Deleted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "APIキーを削除",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/game-api-keys/{id}/projects": {
      "put": {
        "description": "このAPIキーがアクセス可能なプロジェクトを更新します。",
        "operationId": "GameApiKeysController_updateProjects",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "API Key ID",
            "schema": {
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateGameApiKeyProjectsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GameApiKeyResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "APIキーがアクセス可能なプロジェクトを設定",
        "tags": [
          "v0"
        ]
      },
      "get": {
        "description": "このAPIキーがアクセス可能なプロジェクトの一覧を取得します。",
        "operationId": "GameApiKeysController_getProjects",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "API Key ID",
            "schema": {
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "APIキーがアクセス可能なプロジェクト一覧を取得",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/game/screenshot-storage-status": {
      "get": {
        "operationId": "GameController_getScreenshotStorageStatus",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScreenshotStorageStatusDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "スクリーンショットストレージの有効状態を取得",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects": {
      "get": {
        "operationId": "GameController_getProjects",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of projects to return (default: 20, max: 100)",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "integer"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Offset for pagination (default: 0)",
            "schema": {
              "default": 0,
              "example": 0,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "アクセス可能なプロジェクト一覧を取得",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions": {
      "post": {
        "operationId": "GameController_createSession",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlaySessionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "セッションを作成",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}": {
      "put": {
        "operationId": "GameController_updateSession",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlaySessionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "セッションを更新",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/finish": {
      "post": {
        "operationId": "GameController_finishSession",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlaySessionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "セッションを終了",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/logs/{event_type}": {
      "post": {
        "operationId": "GameController_createLog",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "description": "Event type",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGeneralLogDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringGeneralLogDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "テキストログを送信",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/position-logs/{event_type}": {
      "post": {
        "operationId": "GameController_createPositionLog",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "event_type",
            "required": true,
            "in": "path",
            "description": "Event type",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGeneralLogDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PositionGeneralLogDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "位置ログを送信",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/player-positions": {
      "post": {
        "operationId": "GameController_uploadPlayerPositions",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Binary data containing player positions (V1 or V2 format)",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "プレイヤー位置ログをバイナリでまとめて送信（V2フォーマット対応）",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/field-object-logs": {
      "post": {
        "operationId": "GameController_uploadFieldObjectLogs",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Binary data containing field object events (LSFO V1 format)",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "フィールドオブジェクトログをバイナリでまとめて送信（LSFOフォーマット）",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/general-events/upload": {
      "post": {
        "operationId": "GameController_uploadGeneralEventLogs",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Binary file in LSEV V1 format"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "Upload batch general event logs",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/game/projects/{project_id}/sessions/{session_id}/heatmap-embed-url": {
      "get": {
        "description": "セッション完了後にWebViewで直接ヒートマップを表示するための短縮URL（4時間有効）を生成します",
        "operationId": "GameController_getHeatmapEmbedUrl",
        "parameters": [
          {
            "name": "X-API-Key",
            "in": "header",
            "description": "ゲームクライアント用APIキー",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "description": "Project ID",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "path",
            "description": "Session ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeatmapEmbedUrlResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "X-API-Key": []
          }
        ],
        "summary": "ヒートマップ埋め込みページのURLを取得",
        "tags": [
          "Game Client API"
        ]
      }
    },
    "/api/v0/route-coach/projects/{project_id}/event-clusters": {
      "get": {
        "description": "\n指定したプレイヤーのイベント（死亡/成功）をクラスタリングし、\n各クラスタに対するルートパターンと改善案を返します。\n        ",
        "operationId": "RouteCoachController_getEventClusters",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "query",
            "description": "Session ID to filter events (required)",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "player_id",
            "required": false,
            "in": "query",
            "description": "Player ID to filter events (optional - if not specified, all players are included)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "map_name",
            "required": false,
            "in": "query",
            "description": "Map name to filter by",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "event_type",
            "required": false,
            "in": "query",
            "description": "Event type to filter by",
            "schema": {
              "type": "string",
              "enum": [
                "death",
                "success"
              ]
            }
          },
          {
            "name": "freshness_days",
            "required": false,
            "in": "query",
            "description": "Data freshness window in days (default: 30)",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "イベントクラスタと改善案リスト",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/EventClusterDetailDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "プロジェクトのイベントクラスタと改善案を取得",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/route-coach/improvement-routes/{improvement_route_id}/feedback": {
      "post": {
        "description": "\n改善案に対して3段階評価（Bad/Neutral/Good）とコメントを送信します。\n同じプレイヤーから同じ改善案への複数フィードバックは上書きされます。\n        ",
        "operationId": "RouteCoachController_submitFeedback",
        "parameters": [
          {
            "name": "improvement_route_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitImprovementRouteFeedbackRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "フィードバック送信成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubmitImprovementRouteFeedbackResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "改善案のフィードバックを送信",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/route-coach/projects/{project_id}/generate-improvement-routes": {
      "post": {
        "description": "\n指定セッションの改善ルートを生成するための非同期ジョブをキューに投入します。\nこのジョブはセッション内の死亡/成功イベントをクラスタリングし、各クラスタに対する\n改善提案（Strategy 1: 分岐点検出、Strategy 2: 安全通過、Strategy 3: 時間短縮）を生成します。\n\n同じプロジェクト・セッションの組み合わせで既に完了したタスクがある場合は、\n新規ジョブを投入せずに既存タスクを返します。\n        ",
        "operationId": "RouteCoachController_generateImprovementRoutes",
        "parameters": [
          {
            "name": "project_id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "session_id",
            "required": true,
            "in": "query",
            "description": "対象セッションID（必須）",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "map_name",
            "required": false,
            "in": "query",
            "description": "マップ名（改善提案生成時のフィルタ用）",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "force",
            "required": false,
            "in": "query",
            "description": "force=true の場合、既存の completed/failed タスクを削除して強制再生成",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "ジョブ投入成功またはキャッシュされたタスク",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "taskId": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "セッションの改善ルート生成ジョブを投入",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/route-coach/improvement-routes-jobs/{job_id}": {
      "get": {
        "description": "\n改善ルート生成タスクの処理状況を確認します。\n完了したタスクは永続化されているため、いつでも結果を取得できます。\n        ",
        "operationId": "RouteCoachController_getImprovementRoutesJobStatus",
        "parameters": [
          {
            "name": "job_id",
            "required": true,
            "in": "path",
            "description": "タスクID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "タスク状態",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "id": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "processing",
                        "completed",
                        "failed"
                      ]
                    },
                    "result": {
                      "type": "object",
                      "nullable": true
                    },
                    "error_message": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updated_at": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "改善ルート生成タスクの状態を取得",
        "tags": [
          "v0"
        ]
      }
    },
    "/api/v0/embed/verify": {
      "post": {
        "description": "heatmap埋め込み用トークンを検証し、projectIdとsessionIdを返します",
        "operationId": "EmbedController_verifyToken",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyEmbedTokenRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "トークンが有効な場合",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyEmbedTokenResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "summary": "Embedトークンを検証",
        "tags": [
          "Embed"
        ]
      }
    },
    "/api/v0/public-stats": {
      "get": {
        "description": "システム全体の統計情報を取得します。認証は不要です。",
        "operationId": "PublicStatsController_getPublicStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": "統計情報の取得に成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicStatsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "サーバーエラー"
          }
        },
        "summary": "公開統計情報を取得",
        "tags": [
          "Public Stats"
        ]
      }
    },
    "/api/v0/admin/stats": {
      "get": {
        "operationId": "AdminController_getStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get admin dashboard stats",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/users": {
      "get": {
        "operationId": "AdminController_getUsers",
        "parameters": [
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all users",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/users/{id}": {
      "get": {
        "operationId": "AdminController_getUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get user by ID",
        "tags": [
          "Admin"
        ]
      },
      "patch": {
        "operationId": "AdminController_updateUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update user",
        "tags": [
          "Admin"
        ]
      },
      "delete": {
        "operationId": "AdminController_deleteUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete user",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/projects": {
      "get": {
        "operationId": "AdminController_getProjects",
        "parameters": [
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all projects",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/projects/{id}": {
      "delete": {
        "operationId": "AdminController_deleteProject",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete project",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/sessions": {
      "get": {
        "operationId": "AdminController_getSessions",
        "parameters": [
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all play sessions",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/sessions/{id}": {
      "delete": {
        "operationId": "AdminController_deleteSession",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete play session",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/api-keys": {
      "get": {
        "operationId": "AdminController_getApiKeys",
        "parameters": [
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all API keys",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/api-keys/{id}": {
      "patch": {
        "operationId": "AdminController_updateApiKey",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update API key (enable/disable)",
        "tags": [
          "Admin"
        ]
      },
      "delete": {
        "operationId": "AdminController_deleteApiKey",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete API key",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/heatmap-tasks": {
      "get": {
        "operationId": "AdminController_getHeatmapTasks",
        "parameters": [
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all heatmap tasks",
        "tags": [
          "Admin"
        ]
      }
    },
    "/api/v0/admin/heatmap-tasks/{id}": {
      "delete": {
        "operationId": "AdminController_deleteHeatmapTask",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DefaultErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete heatmap task",
        "tags": [
          "Admin"
        ]
      }
    }
  },
  "info": {
    "title": "Ludiscan API Documentation",
    "description": "Ludiscan API for game analytics and session tracking",
    "version": "1.29.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "UserResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "role": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "role"
        ]
      },
      "CreateUserDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "name"
          },
          "password": {
            "type": "string",
            "example": "password"
          },
          "email": {
            "type": "string"
          }
        },
        "required": [
          "password",
          "email"
        ]
      },
      "UpdateRoleDto": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "description": "ユーザーの新しいロール (例: user, admin)",
            "example": "admin"
          }
        },
        "required": [
          "role"
        ]
      },
      "GoogleStartQueryDto": {
        "type": "object",
        "properties": {
          "state": {
            "type": "string",
            "description": "署名付きのstate（CSRF防止やモード伝播用）。リンク時はAuthControllerが自動生成。"
          }
        }
      },
      "GoogleLinkQueryDto": {
        "type": "object",
        "properties": {
          "returnTo": {
            "type": "string",
            "description": "リンク完了後に戻る先（フロントのURL）"
          }
        }
      },
      "GoogleAuthWithReturnQueryDto": {
        "type": "object",
        "properties": {
          "returnTo": {
            "type": "string",
            "description": "認証完了後に戻る先（フロントのURL）"
          }
        }
      },
      "GoogleCallbackQueryDto": {
        "type": "object",
        "properties": {
          "state": {
            "type": "string",
            "description": "署名付きstate（自前検証用）"
          },
          "error": {
            "type": "string",
            "description": "Google側エラー（存在する場合）"
          },
          "code": {
            "type": "string"
          },
          "scope": {
            "type": "string"
          },
          "authuser": {
            "type": "string"
          },
          "prompt": {
            "type": "string"
          },
          "hd": {
            "type": "string"
          }
        }
      },
      "LoginUserDto": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string",
            "example": "password"
          },
          "email": {
            "type": "string"
          }
        },
        "required": [
          "password",
          "email"
        ]
      },
      "LoginResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponseDto"
          }
        },
        "required": [
          "accessToken",
          "user"
        ]
      },
      "ProjectResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "is2D": {
            "type": "boolean"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "user": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/UserResponseDto"
              }
            ]
          },
          "session_count": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "is2D",
          "createdAt"
        ]
      },
      "CreateProjectDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "name"
          },
          "description": {
            "type": "string",
            "example": "description"
          },
          "is2D": {
            "type": "boolean",
            "example": false
          }
        },
        "required": [
          "name",
          "description"
        ]
      },
      "DefaultSuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "message",
            "nullable": true
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "UpdateProjectDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "name"
          },
          "description": {
            "type": "string",
            "example": "description"
          },
          "is2D": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "CalcFieldResponseDto": {
        "type": "object",
        "properties": {
          "fields": {
            "example": "field",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "fields"
        ]
      },
      "GetMetaDataDto": {
        "type": "object",
        "properties": {
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "values"
        ]
      },
      "StringGeneralLogDataDto": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string"
          }
        },
        "required": [
          "text"
        ]
      },
      "StringGeneralLogDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "event_type": {
            "type": "string"
          },
          "event_data": {
            "$ref": "#/components/schemas/StringGeneralLogDataDto"
          },
          "offset_timestamp": {
            "type": "number"
          },
          "player": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "event_type",
          "event_data",
          "offset_timestamp",
          "player"
        ]
      },
      "GetGeneralLogKeysDto": {
        "type": "object",
        "properties": {
          "keys": {
            "description": "List of keys to retrieve",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "keys"
        ]
      },
      "Position": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "format": "float"
          },
          "y": {
            "type": "number",
            "format": "float"
          },
          "z": {
            "type": "number",
            "format": "float"
          }
        },
        "required": [
          "x",
          "y",
          "z"
        ]
      },
      "PositionGeneralLogDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "event_type": {
            "type": "string"
          },
          "event_data": {
            "$ref": "#/components/schemas/Position"
          },
          "offset_timestamp": {
            "type": "number"
          },
          "player": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "event_type",
          "event_data",
          "offset_timestamp",
          "player"
        ]
      },
      "ProjectMemberDto": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string"
          },
          "project_id": {
            "type": "number"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "viewer"
            ]
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "created_at": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "user_id",
          "project_id",
          "role",
          "email",
          "name",
          "created_at"
        ]
      },
      "ProjectResponseV01Dto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "is2D": {
            "type": "boolean"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "user": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/UserResponseDto"
              }
            ]
          },
          "memberships": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProjectMemberDto"
            }
          },
          "session_count": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "is2D",
          "createdAt",
          "memberships"
        ]
      },
      "AddMemberByEmailDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "viewer"
            ]
          }
        },
        "required": [
          "email"
        ]
      },
      "GetMapsDto": {
        "type": "object",
        "properties": {
          "maps": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "maps"
        ]
      },
      "StringGeneralLogDetailDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "event_type": {
            "type": "string"
          },
          "event_data": {
            "$ref": "#/components/schemas/StringGeneralLogDataDto"
          },
          "offset_timestamp": {
            "type": "number"
          },
          "player": {
            "type": "integer"
          },
          "project_id": {
            "type": "number"
          },
          "session_id": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "event_type",
          "event_data",
          "offset_timestamp",
          "player",
          "project_id",
          "session_id"
        ]
      },
      "PositionGeneralLogDetailDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "event_type": {
            "type": "string"
          },
          "event_data": {
            "$ref": "#/components/schemas/Position"
          },
          "offset_timestamp": {
            "type": "number"
          },
          "player": {
            "type": "integer"
          },
          "project_id": {
            "type": "number"
          },
          "session_id": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "event_type",
          "event_data",
          "offset_timestamp",
          "player",
          "project_id",
          "session_id"
        ]
      },
      "PlaySessionResponseDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "number"
          },
          "projectId": {
            "type": "number"
          },
          "name": {
            "type": "string"
          },
          "deviceId": {
            "type": "string",
            "nullable": true
          },
          "platform": {
            "type": "string",
            "example": "platform",
            "nullable": true
          },
          "appVersion": {
            "type": "string",
            "example": "app_version",
            "nullable": true
          },
          "metaData": {
            "type": "object",
            "example": "meta_data",
            "nullable": true
          },
          "startTime": {
            "format": "date-time",
            "type": "string",
            "example": "start_time"
          },
          "endTime": {
            "format": "date-time",
            "type": "string",
            "example": "end_time",
            "nullable": true
          },
          "isPlaying": {
            "type": "boolean",
            "example": "is_playing"
          }
        },
        "required": [
          "sessionId",
          "projectId",
          "name",
          "deviceId",
          "platform",
          "appVersion",
          "metaData",
          "startTime",
          "endTime",
          "isPlaying"
        ]
      },
      "CreatePlaySessionDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "deviceId": {
            "type": "string",
            "nullable": true
          },
          "platform": {
            "type": "string",
            "nullable": true
          },
          "appVersion": {
            "type": "string",
            "nullable": true
          },
          "metaData": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "UpdatePlaySessionDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minimum": 1
          },
          "deviceId": {
            "type": "string",
            "nullable": true
          },
          "platform": {
            "type": "string",
            "nullable": true
          },
          "appVersion": {
            "type": "string",
            "nullable": true
          },
          "metaData": {
            "type": "object",
            "nullable": true
          }
        }
      },
      "CalcFieldRequestDto": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "example": "field"
          }
        },
        "required": [
          "field"
        ]
      },
      "CalcNumberFieldDto": {
        "type": "object",
        "properties": {
          "min": {
            "type": "number",
            "minimum": 1
          },
          "max": {
            "type": "number",
            "minimum": 1
          },
          "avg": {
            "type": "number",
            "minimum": 1
          }
        },
        "required": [
          "min",
          "max",
          "avg"
        ]
      },
      "CreateGeneralLogDto": {
        "type": "object",
        "properties": {
          "text_data": {
            "type": "object",
            "description": "テキストデータ",
            "nullable": true,
            "example": "Player collected item"
          },
          "position_data": {
            "description": "位置データ",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/Position"
              }
            ]
          },
          "metadata": {
            "type": "object",
            "description": "RouteCoach拡張イベント用のメタデータ",
            "nullable": true,
            "example": {
              "type": "achievement",
              "category": "collectible",
              "severity": "low",
              "tags": [
                "item",
                "collect"
              ]
            }
          },
          "offset_timestamp": {
            "type": "number",
            "description": "オフセットタイムスタンプ（ミリ秒）",
            "example": 1500
          },
          "player": {
            "type": "integer",
            "description": "プレイヤーID",
            "example": 1
          }
        },
        "required": [
          "text_data",
          "position_data",
          "metadata",
          "offset_timestamp",
          "player"
        ]
      },
      "SearchPlaySessionResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Array of play sessions matching the search criteria",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PlaySessionResponseDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total number of sessions matching the criteria",
            "example": 100
          },
          "limit": {
            "type": "number",
            "description": "Number of results returned",
            "example": 20
          },
          "offset": {
            "type": "number",
            "description": "Number of results skipped",
            "example": 0
          }
        },
        "required": [
          "data",
          "total",
          "limit",
          "offset"
        ]
      },
      "SearchSessionSummaryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Session ID",
            "example": 1
          },
          "display": {
            "type": "string",
            "description": "Display text for the session (includes name, platform, version, and start time)",
            "example": "Session_2025-01-15_Morning (Android, v1.2.3) - 2025-01-15 10:30"
          }
        },
        "required": [
          "id",
          "display"
        ]
      },
      "SearchSessionSummaryResponseDto": {
        "type": "object",
        "properties": {
          "sessions": {
            "description": "Array of session summaries matching the search criteria (no pagination)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchSessionSummaryDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total number of sessions found",
            "example": 42
          }
        },
        "required": [
          "sessions",
          "total"
        ]
      },
      "AggregationFieldDto": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "description": "Metadata field name to aggregate (e.g., \"score\", \"playTime\")",
            "example": "score"
          },
          "operations": {
            "type": "array",
            "description": "Aggregation operations to perform",
            "example": [
              "sum",
              "avg",
              "min",
              "max"
            ],
            "items": {
              "type": "string",
              "enum": [
                "count",
                "sum",
                "avg",
                "min",
                "max"
              ]
            }
          }
        },
        "required": [
          "field",
          "operations"
        ]
      },
      "AggregatePlaySessionDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Session name (partial match)",
            "example": "Session_2025"
          },
          "device_id": {
            "type": "string",
            "description": "Device ID (exact match)",
            "example": "device-123"
          },
          "platform": {
            "type": "string",
            "description": "Platform (exact match)",
            "example": "Android"
          },
          "app_version": {
            "type": "string",
            "description": "App version (exact match)",
            "example": "1.0.0"
          },
          "start_time_from": {
            "type": "string",
            "description": "Start time from (ISO 8601)",
            "example": "2025-01-01T00:00:00Z"
          },
          "start_time_to": {
            "type": "string",
            "description": "Start time to (ISO 8601)",
            "example": "2025-01-31T23:59:59Z"
          },
          "end_time_from": {
            "type": "string",
            "description": "End time from (ISO 8601)",
            "example": "2025-01-01T00:00:00Z"
          },
          "end_time_to": {
            "type": "string",
            "description": "End time to (ISO 8601)",
            "example": "2025-01-31T23:59:59Z"
          },
          "is_playing": {
            "type": "boolean",
            "description": "Filter by playing status (true: currently playing, false: finished)",
            "example": false
          },
          "metadata_key": {
            "type": "string",
            "description": "Metadata key to filter by (can be used alone to check key existence)",
            "example": "mapName"
          },
          "metadata_value": {
            "type": "string",
            "description": "Metadata value to filter by (requires metadata_key to be specified)",
            "example": "Level1"
          },
          "q": {
            "type": "string",
            "description": "Unified search query (same format as search endpoint)",
            "example": "platform:Android is:finished"
          },
          "aggregations": {
            "description": "Array of fields to aggregate with their operations. If not specified, only count is returned.",
            "example": [
              {
                "field": "score",
                "operations": [
                  "sum",
                  "avg",
                  "min",
                  "max"
                ]
              },
              {
                "field": "playTime",
                "operations": [
                  "sum",
                  "avg"
                ]
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AggregationFieldDto"
            }
          }
        }
      },
      "FieldAggregationResultDto": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "description": "Field name that was aggregated",
            "example": "score"
          },
          "count": {
            "type": "number",
            "description": "Count of sessions that have this field with numeric value",
            "example": 150
          },
          "sum": {
            "type": "number",
            "description": "Sum of all values (if requested)",
            "example": 12500
          },
          "avg": {
            "type": "number",
            "description": "Average value (if requested)",
            "example": 83.33
          },
          "min": {
            "type": "number",
            "description": "Minimum value (if requested)",
            "example": 10
          },
          "max": {
            "type": "number",
            "description": "Maximum value (if requested)",
            "example": 200
          }
        },
        "required": [
          "field",
          "count"
        ]
      },
      "AggregatePlaySessionResponseDto": {
        "type": "object",
        "properties": {
          "totalCount": {
            "type": "number",
            "description": "Total count of sessions matching the filter criteria",
            "example": 250
          },
          "finishedCount": {
            "type": "number",
            "description": "Count of finished sessions (end_time is not null)",
            "example": 200
          },
          "playingCount": {
            "type": "number",
            "description": "Count of sessions currently playing (end_time is null)",
            "example": 50
          },
          "aggregations": {
            "description": "Aggregation results for each requested field",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FieldAggregationResultDto"
            }
          }
        },
        "required": [
          "totalCount",
          "finishedCount",
          "playingCount"
        ]
      },
      "FilterOptionsResponseDto": {
        "type": "object",
        "properties": {
          "platforms": {
            "description": "List of distinct platforms",
            "example": [
              "Android",
              "iOS",
              "Windows"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "appVersions": {
            "description": "List of distinct app versions",
            "example": [
              "1.0.0",
              "1.1.0",
              "2.0.0"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "deviceIds": {
            "description": "List of distinct device IDs",
            "example": [
              "device-001",
              "device-002"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "totalSessions": {
            "type": "number",
            "description": "Total session count in the project",
            "example": 500
          }
        },
        "required": [
          "platforms",
          "appVersions",
          "deviceIds",
          "totalSessions"
        ]
      },
      "MetadataKeyInfoDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "Metadata key name",
            "example": "score"
          },
          "count": {
            "type": "number",
            "description": "Number of sessions that have this key",
            "example": 150
          },
          "isNumeric": {
            "type": "boolean",
            "description": "Whether the values are numeric (can be aggregated)",
            "example": true
          },
          "sampleValues": {
            "description": "Sample values (up to 5)",
            "example": [
              100,
              200,
              150
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "key",
          "count",
          "isNumeric",
          "sampleValues"
        ]
      },
      "MetadataKeysResponseDto": {
        "type": "object",
        "properties": {
          "keys": {
            "description": "List of metadata keys with their information",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetadataKeyInfoDto"
            }
          },
          "totalSessions": {
            "type": "number",
            "description": "Total session count in the project",
            "example": 500
          }
        },
        "required": [
          "keys",
          "totalSessions"
        ]
      },
      "PlayPositionLogDto": {
        "type": "object",
        "properties": {
          "player": {
            "type": "number",
            "description": "Player identifier",
            "example": 1
          },
          "x": {
            "type": "number",
            "minimum": 1,
            "description": "X coordinate"
          },
          "y": {
            "type": "number",
            "minimum": 1,
            "description": "Y coordinate"
          },
          "z": {
            "type": "number",
            "nullable": true,
            "description": "Z coordinate"
          },
          "offset_timestamp": {
            "type": "integer",
            "minimum": 1,
            "description": "Milliseconds since session start"
          },
          "location": {
            "type": "string",
            "nullable": true,
            "description": "Location name or identifier"
          },
          "status": {
            "type": "object",
            "nullable": true,
            "description": "Player status data (health, state, score, etc.)",
            "example": {
              "health": 100,
              "state": "running",
              "score": 1000
            }
          }
        },
        "required": [
          "player",
          "x",
          "y",
          "offset_timestamp"
        ]
      },
      "FieldObjectLogDto": {
        "type": "object",
        "properties": {
          "object_id": {
            "type": "string",
            "description": "Unique object identifier in the game",
            "example": "item_123"
          },
          "object_type": {
            "type": "string",
            "description": "Type of the object",
            "example": "health_potion"
          },
          "x": {
            "type": "number",
            "description": "X coordinate"
          },
          "y": {
            "type": "number",
            "description": "Y coordinate"
          },
          "z": {
            "type": "number",
            "nullable": true,
            "description": "Z coordinate"
          },
          "offset_timestamp": {
            "type": "integer",
            "description": "Milliseconds since session start"
          },
          "event_type": {
            "type": "string",
            "enum": [
              "spawn",
              "move",
              "despawn",
              "update"
            ],
            "description": "Event type for this log entry"
          },
          "status": {
            "type": "object",
            "nullable": true,
            "description": "Additional status data for this object (health, state, score, etc.)",
            "example": {
              "health": 100,
              "state": "active",
              "score": 50
            }
          }
        },
        "required": [
          "object_id",
          "object_type",
          "x",
          "y",
          "offset_timestamp",
          "event_type"
        ]
      },
      "HeatmapSearchQueryDto": {
        "type": "object",
        "properties": {
          "q": {
            "type": "string",
            "description": "Unified search query (plain text keyword OR GitHub-style filters)",
            "example": "platform:Android is:finished"
          },
          "name": {
            "type": "string",
            "description": "Session name (partial match)",
            "example": "Session_2025"
          },
          "device_id": {
            "type": "string",
            "description": "Device ID (exact match)",
            "example": "device-123"
          },
          "platform": {
            "type": "string",
            "description": "Platform (exact match)",
            "example": "Android"
          },
          "app_version": {
            "type": "string",
            "description": "App version (exact match)",
            "example": "1.0.0"
          },
          "start_time_from": {
            "type": "string",
            "description": "Start time from (ISO 8601)",
            "example": "2025-01-01T00:00:00Z"
          },
          "start_time_to": {
            "type": "string",
            "description": "Start time to (ISO 8601)",
            "example": "2025-01-31T23:59:59Z"
          },
          "end_time_from": {
            "type": "string",
            "description": "End time from (ISO 8601)",
            "example": "2025-01-01T00:00:00Z"
          },
          "end_time_to": {
            "type": "string",
            "description": "End time to (ISO 8601)",
            "example": "2025-01-31T23:59:59Z"
          },
          "is_playing": {
            "type": "boolean",
            "description": "Filter by playing status (true: currently playing, false: finished)",
            "example": false
          },
          "metadata_key": {
            "type": "string",
            "description": "Metadata key to search for",
            "example": "mapName"
          },
          "metadata_value": {
            "type": "string",
            "description": "Metadata value to search for (requires metadata_key)",
            "example": "Level1"
          }
        }
      },
      "CreateHeatmapDto": {
        "type": "object",
        "properties": {
          "stepSize": {
            "type": "number",
            "minimum": 50,
            "example": 300,
            "description": "Heatmap width"
          },
          "zVisible": {
            "type": "boolean",
            "example": false,
            "description": "Whether to display the Z-axis"
          },
          "sessionIds": {
            "example": [
              1,
              2,
              3
            ],
            "description": "Filter by specific session IDs (for project heatmap). Cannot be used together with searchQuery.",
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "searchQuery": {
            "description": "Search query to filter sessions (for project heatmap). Cannot be used together with sessionIds. Use the same parameters as the search summary endpoint.",
            "allOf": [
              {
                "$ref": "#/components/schemas/HeatmapSearchQueryDto"
              }
            ]
          }
        }
      },
      "HeatMapTaskResultListItem": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "description": "X",
            "example": 0
          },
          "y": {
            "type": "number",
            "description": "Y",
            "example": 0
          },
          "z": {
            "type": "number",
            "description": "Z",
            "example": 0
          },
          "density": {
            "type": "number",
            "description": "Density",
            "example": 0
          }
        },
        "required": [
          "x",
          "y",
          "density"
        ]
      },
      "HeatmapTaskDto": {
        "type": "object",
        "properties": {
          "taskId": {
            "type": "number",
            "description": "Task ID",
            "example": 1
          },
          "project": {
            "description": "Project",
            "example": {
              "id": 1,
              "name": "Project 1",
              "description": "Project 1 description",
              "createdAt": "2021-01-01T00:00:00.000Z"
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/ProjectResponseDto"
              }
            ]
          },
          "session": {
            "description": "Session",
            "example": {
              "sessionId": 0,
              "projectId": 0,
              "name": "string",
              "deviceId": "string",
              "platform": "platform",
              "appVersion": "app_version",
              "metaData": "meta_data",
              "startTime": "2021-01-01T00:00:00.000Z",
              "endTime": "2021-01-01T00:00:00.000Z",
              "isPlaying": true
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/PlaySessionResponseDto"
              }
            ]
          },
          "sessionIds": {
            "description": "Session IDs used for filtering (if multiple sessions)",
            "example": [
              1,
              2,
              3
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "searchQuery": {
            "type": "object",
            "description": "Search query text used to filter sessions (GitHub-style query)",
            "example": "platform:Android is:finished",
            "nullable": true
          },
          "stepSize": {
            "type": "number",
            "description": "Step size",
            "example": 200
          },
          "zVisible": {
            "type": "boolean",
            "description": "Z visible",
            "example": true
          },
          "status": {
            "type": "string",
            "description": "Status",
            "example": "completed",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ]
          },
          "result": {
            "description": "Result list",
            "example": [
              {
                "x": 0,
                "y": 0,
                "z": 0,
                "density": 0
              }
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HeatMapTaskResultListItem"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at",
            "example": "2021-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Updated at",
            "example": "2021-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "taskId",
          "project",
          "stepSize",
          "zVisible",
          "status",
          "createdAt",
          "updatedAt"
        ]
      },
      "HeatmapTaskListItemDto": {
        "type": "object",
        "properties": {
          "taskId": {
            "type": "number",
            "description": "Task ID",
            "example": 1
          },
          "project": {
            "description": "Project",
            "allOf": [
              {
                "$ref": "#/components/schemas/ProjectResponseDto"
              }
            ]
          },
          "session": {
            "description": "Session",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/PlaySessionResponseDto"
              }
            ]
          },
          "sessionIds": {
            "description": "Session IDs used for filtering (if multiple sessions)",
            "example": [
              1,
              2,
              3
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "searchQuery": {
            "type": "object",
            "description": "Search query text used to filter sessions (GitHub-style query)",
            "example": "platform:Android is:finished",
            "nullable": true
          },
          "stepSize": {
            "type": "number",
            "description": "Step size",
            "example": 200
          },
          "zVisible": {
            "type": "boolean",
            "description": "Z visible",
            "example": true
          },
          "status": {
            "type": "string",
            "description": "Status",
            "example": "completed",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at",
            "example": "2021-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Updated at",
            "example": "2021-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "taskId",
          "project",
          "stepSize",
          "zVisible",
          "status",
          "createdAt",
          "updatedAt"
        ]
      },
      "HeatmapTaskListDto": {
        "type": "object",
        "properties": {
          "tasks": {
            "description": "Tasks list",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HeatmapTaskListItemDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total count",
            "example": 100
          },
          "limit": {
            "type": "number",
            "description": "Limit",
            "example": 20
          },
          "offset": {
            "type": "number",
            "description": "Offset",
            "example": 0
          }
        },
        "required": [
          "tasks",
          "total",
          "limit",
          "offset"
        ]
      },
      "CreateEmbedUrlDto": {
        "type": "object",
        "properties": {
          "expiresInHours": {
            "type": "number",
            "minimum": 0.5,
            "maximum": 8760,
            "default": 4,
            "example": 4,
            "description": "有効期限（時間単位）。0.5〜8760の範囲で指定可能。デフォルト: 4時間"
          }
        }
      },
      "HeatmapEmbedUrlResponseDto": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "ヒートマップ埋め込みページのURL（トークン付き）",
            "example": "https://ludiscan.com/heatmap/embed/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "expiresAt": {
            "type": "string",
            "description": "トークンの有効期限（ISO 8601形式）",
            "example": "2024-01-01T12:00:00.000Z"
          }
        },
        "required": [
          "url",
          "expiresAt"
        ]
      },
      "NormalizedHeatmapPointDto": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "description": "X coordinate",
            "example": 100.5
          },
          "y": {
            "type": "number",
            "description": "Y coordinate",
            "example": 200.5
          },
          "z": {
            "type": "number",
            "description": "Z coordinate",
            "example": 50
          },
          "normalizedDensity": {
            "type": "number",
            "description": "Normalized density value (0-1 range)",
            "example": 0.75,
            "minimum": 0,
            "maximum": 1
          }
        },
        "required": [
          "x",
          "y",
          "z",
          "normalizedDensity"
        ]
      },
      "NormalizedHeatmapStatsDto": {
        "type": "object",
        "properties": {
          "min": {
            "type": "number",
            "description": "Minimum raw density value",
            "example": 1
          },
          "max": {
            "type": "number",
            "description": "Maximum raw density value",
            "example": 1000
          },
          "percentile1": {
            "type": "number",
            "description": "1st percentile density value (lower bound for normalization)",
            "example": 5
          },
          "percentile99": {
            "type": "number",
            "description": "99th percentile density value (upper bound for normalization)",
            "example": 800
          },
          "scaleMode": {
            "type": "string",
            "description": "Scale mode used for normalization",
            "example": "log1p",
            "enum": [
              "sqrt",
              "log1p"
            ]
          },
          "totalPoints": {
            "type": "number",
            "description": "Total number of data points",
            "example": 500
          }
        },
        "required": [
          "min",
          "max",
          "percentile1",
          "percentile99",
          "scaleMode",
          "totalPoints"
        ]
      },
      "HeatmapTaskV01Dto": {
        "type": "object",
        "properties": {
          "taskId": {
            "type": "number",
            "description": "Task ID",
            "example": 1
          },
          "project": {
            "description": "Project",
            "allOf": [
              {
                "$ref": "#/components/schemas/ProjectResponseDto"
              }
            ]
          },
          "session": {
            "description": "Session (if task is for a specific session)",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/PlaySessionResponseDto"
              }
            ]
          },
          "sessionIds": {
            "description": "Session IDs used for filtering (if multiple sessions)",
            "example": [
              1,
              2,
              3
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "searchQuery": {
            "type": "object",
            "description": "Search query text used to filter sessions (GitHub-style query)",
            "example": "platform:Android is:finished",
            "nullable": true
          },
          "stepSize": {
            "type": "number",
            "description": "Step size for grid cells",
            "example": 200
          },
          "zVisible": {
            "type": "boolean",
            "description": "Whether Z axis is visible (3D mode)",
            "example": true
          },
          "status": {
            "type": "string",
            "description": "Task status",
            "example": "completed",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ]
          },
          "result": {
            "description": "Normalized heatmap result with density values in 0-1 range",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NormalizedHeatmapPointDto"
            }
          },
          "stats": {
            "description": "Normalization statistics",
            "allOf": [
              {
                "$ref": "#/components/schemas/NormalizedHeatmapStatsDto"
              }
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at timestamp",
            "example": "2021-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Updated at timestamp",
            "example": "2021-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "taskId",
          "project",
          "stepSize",
          "zVisible",
          "status",
          "result",
          "stats",
          "createdAt",
          "updatedAt"
        ]
      },
      "HeatmapTaskV01ListItemDto": {
        "type": "object",
        "properties": {
          "taskId": {
            "type": "number",
            "description": "Task ID",
            "example": 1
          },
          "sessionId": {
            "type": "object",
            "description": "Session ID (if task is for a specific session)",
            "example": 123,
            "nullable": true
          },
          "sessionIds": {
            "description": "Session IDs used for filtering (if multiple sessions)",
            "example": [
              1,
              2,
              3
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "searchQuery": {
            "type": "object",
            "description": "Search query text used to filter sessions",
            "example": "platform:Android is:finished",
            "nullable": true
          },
          "stepSize": {
            "type": "number",
            "description": "Step size for grid cells",
            "example": 200
          },
          "zVisible": {
            "type": "boolean",
            "description": "Whether Z axis is visible (3D mode)",
            "example": true
          },
          "status": {
            "type": "string",
            "description": "Task status",
            "example": "completed",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at timestamp",
            "example": "2021-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Updated at timestamp",
            "example": "2021-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "taskId",
          "stepSize",
          "zVisible",
          "status",
          "createdAt",
          "updatedAt"
        ]
      },
      "HeatmapTaskV01ListResponseDto": {
        "type": "object",
        "properties": {
          "tasks": {
            "description": "List of heatmap tasks",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HeatmapTaskV01ListItemDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total number of tasks",
            "example": 100
          },
          "limit": {
            "type": "number",
            "description": "Number of tasks returned",
            "example": 20
          },
          "offset": {
            "type": "number",
            "description": "Offset for pagination",
            "example": 0
          }
        },
        "required": [
          "tasks",
          "total",
          "limit",
          "offset"
        ]
      },
      "SessionSummaryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Summary UUID",
            "example": "8c7b3c7a-1c6a-41a4-9a9b-9b1c1d2e3f4a"
          },
          "status": {
            "type": "string",
            "enum": [
              "queued",
              "running",
              "done",
              "error"
            ]
          },
          "lang": {
            "type": "string",
            "enum": [
              "ja",
              "en"
            ],
            "description": "Summary language"
          },
          "provider": {
            "type": "string",
            "enum": [
              "template",
              "ollama",
              "openai"
            ],
            "description": "AI provider used for generation"
          },
          "model": {
            "type": "string",
            "example": "gpt-4o-mini",
            "description": "AI model name"
          },
          "summary_md": {
            "type": "string",
            "nullable": true,
            "description": "Summary in Markdown format"
          },
          "summary_json": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true,
            "description": "Summary in JSON format with structured data",
            "example": {
              "title": "Session Summary",
              "description": "Player completed level 1",
              "keyFindings": [
                "Fast completion",
                "No deaths"
              ]
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Summary creation timestamp"
          }
        },
        "required": [
          "id",
          "status",
          "lang",
          "provider",
          "model",
          "summary_md",
          "summary_json",
          "created_at"
        ]
      },
      "CreateGameApiKeyDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "APIキーの識別名",
            "example": "My Unity Game Client"
          },
          "projectIds": {
            "description": "初期段階でアクセス可能にするプロジェクトIDの配列（オプション）",
            "example": [
              1,
              2,
              3
            ],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "CreateGameApiKeyResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "APIキーID"
          },
          "name": {
            "type": "string",
            "description": "APIキーの識別名"
          },
          "apiKey": {
            "type": "string",
            "description": "APIキー本体（この画面でのみ表示されます。必ず保存してください）"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "作成日時"
          }
        },
        "required": [
          "id",
          "name",
          "apiKey",
          "createdAt"
        ]
      },
      "GameApiKeyResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "APIキーID"
          },
          "name": {
            "type": "string",
            "description": "APIキーの識別名"
          },
          "isActive": {
            "type": "boolean",
            "description": "アクティブ状態"
          },
          "lastUsedAt": {
            "type": "object",
            "description": "最終使用日時",
            "nullable": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "作成日時"
          },
          "projects": {
            "description": "アクセス可能なプロジェクトのリスト",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProjectResponseDto"
            }
          },
          "projectIds": {
            "description": "アクセス可能なプロジェクトIDのリスト (deprecated: use projects instead)",
            "deprecated": true,
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": [
          "id",
          "name",
          "isActive",
          "lastUsedAt",
          "createdAt",
          "projects",
          "projectIds"
        ]
      },
      "UpdateGameApiKeyProjectsDto": {
        "type": "object",
        "properties": {
          "projectIds": {
            "description": "アクセスを許可するプロジェクトIDのリスト",
            "example": [
              1,
              2,
              3
            ],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": [
          "projectIds"
        ]
      },
      "ScreenshotStorageStatusDto": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "Whether screenshot storage is enabled",
            "example": true
          }
        },
        "required": [
          "enabled"
        ]
      },
      "EventRawCoordinateDto": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "description": "X coordinate"
          },
          "y": {
            "type": "number",
            "description": "Y coordinate"
          },
          "z": {
            "type": "number",
            "description": "Z coordinate"
          },
          "event_timestamp": {
            "type": "number",
            "description": "Event timestamp (milliseconds)"
          },
          "session_id": {
            "type": "string",
            "description": "Session ID"
          },
          "player_id": {
            "type": "string",
            "description": "Player ID"
          }
        },
        "required": [
          "x",
          "y",
          "z",
          "event_timestamp",
          "session_id",
          "player_id"
        ]
      },
      "RawRouteDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Route ID"
          },
          "player_id": {
            "type": "string",
            "description": "Player ID"
          },
          "session_id": {
            "type": "number",
            "description": "Session ID"
          },
          "trajectory_points": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "x": {
                  "type": "number"
                },
                "y": {
                  "type": "number"
                },
                "z": {
                  "type": "number"
                },
                "offset_timestamp": {
                  "type": "number"
                }
              }
            },
            "description": "Trajectory points leading to the cluster (raw player position logs)"
          },
          "duration_ms": {
            "type": "number",
            "description": "Duration in milliseconds"
          }
        },
        "required": [
          "id",
          "player_id",
          "session_id",
          "trajectory_points"
        ]
      },
      "ClusteredRouteDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Clustered route ID"
          },
          "trajectory_points": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "x": {
                  "type": "number"
                },
                "y": {
                  "type": "number"
                },
                "z": {
                  "type": "number"
                }
              }
            },
            "description": "Averaged trajectory points (clustered)"
          },
          "occurrence_count": {
            "type": "integer",
            "description": "Number of times this route pattern was taken"
          },
          "success_count": {
            "type": "integer",
            "description": "Number of times this route led to success"
          },
          "avg_duration_ms": {
            "type": "number",
            "description": "Average duration in milliseconds"
          },
          "success_rate": {
            "type": "number",
            "description": "Success rate (0-1)"
          },
          "passes_near_cluster": {
            "type": "boolean",
            "description": "Whether this route passes near the cluster without triggering the event"
          },
          "cluster_near_count": {
            "type": "integer",
            "description": "Number of times this route safely passed near the cluster"
          }
        },
        "required": [
          "id",
          "trajectory_points",
          "occurrence_count",
          "success_count",
          "success_rate",
          "passes_near_cluster",
          "cluster_near_count"
        ]
      },
      "ImprovementRouteDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Improvement route ID"
          },
          "strategy_type": {
            "type": "string",
            "enum": [
              "divergence",
              "safety_passage",
              "faster"
            ],
            "description": "Type of improvement strategy"
          },
          "trajectory_points": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "x": {
                  "type": "number"
                },
                "y": {
                  "type": "number"
                },
                "z": {
                  "type": "number"
                },
                "offset_timestamp": {
                  "type": "number"
                }
              }
            },
            "description": "Recommended trajectory points"
          },
          "success_rate": {
            "type": "number",
            "description": "Success rate (0-1)"
          },
          "success_count": {
            "type": "integer",
            "description": "Number of times this route succeeded"
          },
          "avg_duration_ms": {
            "type": "integer",
            "description": "Average duration in milliseconds"
          },
          "time_saved_ms": {
            "type": "integer",
            "description": "Time saved compared to death routes (milliseconds)"
          },
          "divergence_analysis": {
            "type": "object",
            "additionalProperties": true,
            "description": "Analysis for divergence strategy",
            "example": {
              "divergence_point": {
                "x": 100,
                "y": 200,
                "z": 0
              },
              "distance_to_event_cluster": 15.5,
              "common_prefix_length": 10
            }
          },
          "safety_score": {
            "type": "number",
            "description": "Safety score (0-1) for safety_passage strategy"
          },
          "evidence": {
            "type": "object",
            "additionalProperties": true,
            "description": "Evidence supporting the improvement",
            "example": {
              "description": "Based on successful player routes",
              "reference_player_count": 5,
              "data_source": "success_route",
              "confidence": "high"
            }
          },
          "reasoning": {
            "type": "string",
            "description": "Reasoning behind the improvement"
          },
          "feedback_total_count": {
            "type": "number",
            "description": "Total feedback count"
          },
          "feedback_avg_rating": {
            "type": "number",
            "description": "Average feedback rating (1-3)"
          }
        },
        "required": [
          "id",
          "strategy_type",
          "trajectory_points",
          "feedback_total_count",
          "feedback_avg_rating"
        ]
      },
      "EventClusterDetailDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Cluster ID"
          },
          "cluster_center_x": {
            "type": "number",
            "description": "Center X coordinate of the cluster"
          },
          "cluster_center_y": {
            "type": "number",
            "description": "Center Y coordinate of the cluster"
          },
          "cluster_center_z": {
            "type": "number",
            "description": "Center Z coordinate of the cluster"
          },
          "cluster_radius": {
            "type": "number",
            "description": "Radius of the cluster (meters)"
          },
          "raw_event_count": {
            "type": "integer",
            "description": "Total raw event count in this cluster"
          },
          "event_type": {
            "type": "string",
            "enum": [
              "death",
              "success"
            ],
            "description": "Type of event this cluster represents"
          },
          "player_id": {
            "type": "string",
            "description": "Player ID this cluster belongs to"
          },
          "map_name": {
            "type": "string",
            "description": "Map name"
          },
          "raw_coordinates": {
            "description": "Raw event coordinates in this cluster",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/EventRawCoordinateDto"
            }
          },
          "routes": {
            "description": "Raw routes - individual player movement logs leading to this cluster",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RawRouteDto"
            }
          },
          "clustered_routes": {
            "description": "Clustered routes - aggregated/averaged route patterns for statistics",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ClusteredRouteDto"
            }
          },
          "improvements": {
            "description": "Improvement route recommendations",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImprovementRouteDto"
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Cluster creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Cluster last update timestamp"
          }
        },
        "required": [
          "id",
          "cluster_center_x",
          "cluster_center_y",
          "cluster_center_z",
          "cluster_radius",
          "raw_event_count",
          "event_type",
          "player_id",
          "raw_coordinates",
          "routes",
          "clustered_routes",
          "improvements",
          "created_at",
          "updated_at"
        ]
      },
      "SubmitImprovementRouteFeedbackRequestDto": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "number",
            "enum": [
              1,
              2,
              3
            ],
            "description": "Rating: 1=Bad (👎), 2=Neutral (😐), 3=Good (👍)"
          },
          "comment": {
            "type": "string",
            "description": "Optional comment about the improvement"
          }
        },
        "required": [
          "rating"
        ]
      },
      "ImprovementRouteFeedbackRecordDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "Feedback ID"
          },
          "player_id": {
            "type": "string",
            "description": "Player ID who gave the feedback"
          },
          "rating": {
            "type": "number",
            "enum": [
              1,
              2,
              3
            ],
            "description": "Rating: 1=Bad, 2=Neutral, 3=Good"
          },
          "comment": {
            "type": "string",
            "description": "Comment from the player"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Feedback submission timestamp"
          }
        },
        "required": [
          "id",
          "player_id",
          "rating",
          "created_at"
        ]
      },
      "SubmitImprovementRouteFeedbackResponseDto": {
        "type": "object",
        "properties": {
          "improvement_route_id": {
            "type": "number",
            "description": "Improvement route ID"
          },
          "feedback_total_count": {
            "type": "number",
            "description": "Total feedback count for this improvement route"
          },
          "feedback_avg_rating": {
            "type": "number",
            "description": "Average feedback rating (1-3)"
          },
          "feedbacks": {
            "description": "All feedback records for this improvement route",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImprovementRouteFeedbackRecordDto"
            }
          }
        },
        "required": [
          "improvement_route_id",
          "feedback_total_count",
          "feedback_avg_rating",
          "feedbacks"
        ]
      },
      "VerifyEmbedTokenRequestDto": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "検証するembedトークン",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": [
          "token"
        ]
      },
      "VerifyEmbedTokenResponseDto": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "number",
            "description": "プロジェクトID",
            "example": 1
          },
          "sessionId": {
            "type": "number",
            "description": "セッションID",
            "example": 123
          },
          "expiresAt": {
            "type": "string",
            "description": "トークンの有効期限（ISO 8601形式）",
            "example": "2024-01-01T12:00:00.000Z"
          }
        },
        "required": [
          "projectId",
          "sessionId",
          "expiresAt"
        ]
      },
      "PublicStatsResponseDto": {
        "type": "object",
        "properties": {
          "total_projects": {
            "type": "number",
            "description": "総プロジェクト数",
            "example": 150
          },
          "total_sessions": {
            "type": "number",
            "description": "総セッション数",
            "example": 1234
          },
          "total_events": {
            "type": "number",
            "description": "総イベント数（処理済み）",
            "example": 567890
          },
          "active_sessions_7d": {
            "type": "number",
            "description": "過去7日間のアクティブセッション数",
            "example": 42
          },
          "total_users": {
            "type": "number",
            "description": "総ユーザー数",
            "example": 89
          }
        },
        "required": [
          "total_projects",
          "total_sessions",
          "total_events",
          "active_sessions_7d",
          "total_users"
        ]
      },
      "DefaultErrorResponse": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "number",
            "example": 400
          },
          "message": {
            "type": "string",
            "example": "Bad Request"
          },
          "error": {
            "type": "string",
            "nullable": true,
            "example": "Invalid input data"
          }
        }
      }
    }
  },
  "externalDocs": {
    "description": "/swagger/api/v0/json",
    "url": "/swagger/api/v0/json"
  }
}